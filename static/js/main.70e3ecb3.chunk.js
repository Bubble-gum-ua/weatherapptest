(this.webpackJsonpweatherapptest=this.webpackJsonpweatherapptest||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(10),i=n.n(a),s=(n(107),n(108),n(7)),o=n(13),u=n(32),d=n.n(u),l=n(57),j=n(69),b=n(14),p=n(82).create({baseURL:"https://api.openweathermap.org/data/2.5/"}),h="85132d4ddae160c1f8dcd7eea2cb7f41",m=function(e){return p.get("weather?appid=".concat(h,"&units=metric&q=").concat(e)).then((function(e){return e.data}))},O=function(e){return p.get("group?id=".concat(e,"&appid=").concat(h,"&units=metric")).then((function(e){return e.data}))},x=function(e,t){return p.get("onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=daily,alerts,minutely&appid=").concat(h,"&units=metric")).then((function(e){return e.data}))},f=function(e){return"https://openweathermap.org/img/wn/".concat(e,"@2x.png")},g=function(e){return"https://openweathermap.org/images/flags/".concat(e,".png")},v="TOGGLE_IS_LOADING",y="SET_ERROR",w={isLoading:!1,error:null},C=function(e){return{type:v,isLoading:e}},k=function(e){return{type:y,error:e}},A="ADD_CARD",N="DELETE_CARD",S="UPDATE_BODY",D="SET_DETAILS_PAGE",E={cities:[],detailsPage:{}},I=function(e){return{type:A,card:e}},T=function(e,t){return function(){var n=Object(l.a)(d.a.mark((function n(c,r){var a,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(C(!0)),n.next=4,m(e);case 4:a=n.sent,"ADD"===t?(i=r().cities.cities.find((function(e){return e.id===a.id})),c(i?k("City was picked"):I(a))):"UPDATE"===t&&c({type:S,card:a}),c(C(!1)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),c(k("Not found. Try again.")),c(C(!1));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},L=n(167),P=n(169),_=n(138),W=n(171),R=n(172),M=n(87),U=n.n(M),F=n(88),G=n.n(F),B=n.p+"static/media/preloader.f608a838.svg",H=n(2),J=function(){return Object(H.jsx)("div",{children:Object(H.jsx)("img",{src:B,alt:"preloader"})})},q=Object(L.a)((function(e){return{root:{flexGrow:1,cursor:"pointer"},paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary,cursor:"pointer",maxWidth:"300px",backgroundColor:"rgb(166, 217, 155)"},button:{backgroundColor:"blue",cursor:"pointer"}}})),z=r.a.memo((function(e){var t=e.name,n=e.main,c=e.wind,r=e.icon,a=e.cityId,i=e.weather,u=e.sys.country.split("").map((function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})).join(""),d=q(),l=Object(s.f)(),j=Object(o.b)(),b=function(e){return Math.round(e)},p=Object(o.c)((function(e){return e.main.isLoading}));return Object(H.jsx)("div",{className:d.root,children:Object(H.jsxs)(P.a,{children:[p&&Object(H.jsx)("div",{children:Object(H.jsx)(J,{})}),Object(H.jsxs)(_.a,{className:d.paper,children:[Object(H.jsxs)("h3",{children:[" ",t," ",Object(H.jsx)("img",{alt:"countryIco",src:g(u)})]}),Object(H.jsxs)(W.a,{container:!0,spacing:2,onClick:function(){l.push("/city/".concat(t))},children:[Object(H.jsxs)(W.a,{item:!0,xs:6,children:[Object(H.jsxs)("div",{children:["Temperature: ",b(n.temp)," \xb0C"]}),Object(H.jsxs)("div",{children:["Sky: ",i[0].main," "]}),Object(H.jsxs)("div",{children:["Wind: ",b(c.speed)," m/s"]})]}),Object(H.jsx)(W.a,{item:!0,xs:6,children:Object(H.jsx)("img",{alt:"weatherIco",src:f(r)})})]}),Object(H.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){j(T(t,"UPDATE"))},startIcon:Object(H.jsx)(U.a,{}),children:"Reload Data"}),Object(H.jsx)(R.a,{variant:"contained",color:"secondary",onClick:function(){j({type:N,citiesId:a})},className:d.button,startIcon:Object(H.jsx)(G.a,{}),children:"Delete"})]})]})})})),V=(n(134),n(95)),Y=n(179),K=Object(L.a)({button:{color:"white",background:"blue"},form:{background:"rgb(54,102,191,0.8)",margin:"15px",padding:"15px"}}),Q=r.a.memo((function(){var e=K(),t=Object(o.b)(),n=Object(o.c)((function(e){return e.main.isLoading})),c=Object(V.a)({initialValues:{name:""},onSubmit:function(e){t(T(e.name,"ADD")),c.resetForm()}});return Object(H.jsx)("div",{children:Object(H.jsxs)("form",{onSubmit:c.handleSubmit,className:e.form,children:[Object(H.jsx)(Y.a,Object(b.a)(Object(b.a)({placeholder:"Type here the city name"},c.getFieldProps("name")),{},{onChange:c.handleChange,value:c.values.name})),Object(H.jsx)(R.a,{className:e.button,type:"submit",disabled:n||!c.values.name,variant:"contained",color:"primary",children:" Add City"})]})})})),X=n.p+"static/media/day.e170f8f7.svg",Z=Object(L.a)({root:{minWidth:275}}),$=r.a.memo((function(e){var t=Z(),n=e.cities.map((function(e){return Object(H.jsx)(W.a,{item:!0,children:Object(H.jsx)(W.a,{item:!0,children:Object(H.jsx)(z,{name:e.name,main:e.main,cityId:e.id,wind:e.wind,weather:e.weather,icon:e.weather[0].icon,sys:e.sys})})},e.id)})),c=Object(o.c)((function(e){return e.main.isLoading}));return Object(H.jsxs)("div",{className:"mainWrap",children:[Object(H.jsxs)("h1",{children:["Welcome to the weather widget! ",Object(H.jsx)("img",{src:X,alt:"mainIco"})]}),Object(H.jsx)("h3",{children:"Click below to set your city"}),Object(H.jsx)(Q,{}),c&&Object(H.jsx)("div",{children:Object(H.jsx)(J,{})}),Object(H.jsx)(W.a,{container:!0,className:t.root,spacing:2,children:n})]})})),ee=n(96),te=n(178),ne=n(174),ce=n(175),re=n(176),ae=n(177),ie=n(93),se=n.n(ie),oe=n(173),ue=function(e){var t=new Date(1e3*e),n=t.getHours(),c=t.getMinutes();return n<10?c<10?"0".concat(n,":0").concat(c):"0".concat(n,":").concat(c):"".concat(n,":00")},de=n(91),le=Object(L.a)((function(e){return{root:{maxWidth:"600px",textAlign:"center"}}})),je=r.a.memo((function(e){var t,n=e.detailCard,c=le(),r=null===(t=n.hourly)||void 0===t?void 0:t.map((function(e){var t;return[ue(e.dt),(t=e.temp,Math.round(t))]})),a=[["Hour","Temperature"]];if(r)for(var i=0;i<24;i++)a.push(r[i]);return Object(H.jsx)(W.a,{item:!0,style:{textAlign:"center"},className:c.root,children:Object(H.jsx)(de.a,{width:"100%",height:"100%",chartType:"ColumnChart",loader:Object(H.jsx)("div",{children:Object(H.jsx)(J,{})}),data:a,options:{hAxis:{title:"Hour"},vAxis:{title:"Temperature"},legend:"none",title:"Hourly temperature changing",backgroundColor:"transparent",series:{0:{color:"#d7d120"}}}})})})),be=(n(135),Object(L.a)((function(e){return{root:{flexGrow:1,textAlign:"-webkit-right",marginLeft:"15px"},content:{background:"rgb(48,107,101,0.8)",color:"white",padding:"15px",boxShadow:"2px 2px 5px 2px rgb(169, 169, 101)",maxWidth:"400px",width:"100%",textAlign:"left"},button:{background:"rgb(48,107,101,0.8)",color:"white",fontSize:"18px"},graph:{background:"rgb(48,107,101,0.8)",maxWidth:"600px",marginTop:"10px"}}}))),pe=r.a.memo((function(e){var t=Object(o.b)(),n=be(),r=Object(o.c)((function(e){return e.cities.cities})),a=Object(o.c)((function(e){return e.cities.detailsPage})),i=r.find((function(e){return e.name===r[0].name})),s=i.weather[0].icon,u=ue(i.sys.sunrise),j=ue(i.sys.sunset);Object(c.useEffect)((function(){var e,n;i&&t((e=i.coord.lat,n=i.coord.lon,function(){var t=Object(l.a)(d.a.mark((function t(c){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(C(!0)),t.next=4,x(e,n);case 4:r=t.sent,c({type:D,detailsPage:r}),c(C(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),c(k("Error")),c(C(!1));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[i,t]);var b=function(e){return Math.round(e)};return Object(H.jsxs)("div",{className:"mainContentWrapp",children:[Object(H.jsxs)("h2",{children:[" Temperature: ",b(i.main.temp)," \xb0C"]}),Object(H.jsxs)(W.a,{container:!0,spacing:4,className:n.root,children:[Object(H.jsx)(W.a,{item:!0,xs:5,children:Object(H.jsxs)("div",{className:n.content,children:[Object(H.jsxs)("div",{children:["Feels like: ",b(i.main.feels_like)," C"]}),Object(H.jsxs)("div",{children:["Humidity: ",i.main.humidity," %"]}),Object(H.jsxs)("div",{children:["Pressure: ",i.main.pressure]}),Object(H.jsxs)("div",{children:["Max temperature: ",b(i.main.temp_max)," \xb0C"]}),Object(H.jsxs)("div",{children:["Min temperature: ",b(i.main.temp_min)," \xb0C"]}),Object(H.jsxs)("div",{children:["Wind: ",i.wind.speed," m/s ",i.wind.deg," degree"]}),Object(H.jsxs)("div",{children:["Sunrise: ",u]}),Object(H.jsxs)("div",{children:["Sunset: ",j]}),Object(H.jsx)("img",{alt:"weatherIco",src:f(s)})]})}),Object(H.jsx)(W.a,{item:!0,xs:5,className:n.graph,children:Object(H.jsx)(je,{detailCard:a})})]})]})})),he=Object(L.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1,textAlign:"center",cursor:"pointer"},root:{textAlign:"center",background:" none"}}})),me=r.a.forwardRef((function(e,t){return Object(H.jsx)(oe.a,Object(b.a)({direction:"left",ref:t},e))}));function Oe(){var e=Object(o.c)((function(e){return e.cities.cities})),t=he(),n=r.a.useState(!0),c=Object(ee.a)(n,2),a=c[0],i=c[1],u=Object(s.f)(),d=e.find((function(t){return t.name===e[0].name})),l=d.sys.country.split("").map((function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})).join(""),j=function(){i(!1),u.push("/")};return Object(H.jsx)("div",{className:"dialogPAge",children:Object(H.jsxs)(te.a,{fullScreen:!0,open:a,onClose:j,TransitionComponent:me,className:t.root,children:[Object(H.jsx)(ne.a,{className:t.appBar,children:Object(H.jsxs)(ce.a,{children:[Object(H.jsx)(re.a,{edge:"start",color:"inherit",onClick:j,"aria-label":"close",children:Object(H.jsx)(se.a,{})}),Object(H.jsxs)(ae.a,{variant:"h6",className:t.title,onClick:j,children:[d.name," ",Object(H.jsx)("img",{alt:"countryIco",src:g(l),className:t.flag})]})]})}),Object(H.jsx)(pe,{})]})})}var xe=function(){var e=Object(o.c)((function(e){return e.cities.cities})),t=Object(o.b)();return Object(c.useEffect)((function(){var e=localStorage.getItem("cityCards");if(e&&"[]"!==e){var n=JSON.parse(e).reverse().join();t(function(e){return function(){var t=Object(l.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(C(!0)),t.next=4,O(e);case 4:t.sent.list.forEach((function(e){return n(I(e))})),n(C(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(k("Error")),n(C(!1));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(n))}}),[t]),Object(c.useEffect)((function(){localStorage.setItem("cityCards",JSON.stringify(e.map((function(e){return e.id}))))}),[e]),Object(H.jsx)("div",{className:"App",children:Object(H.jsxs)(s.c,{children:[Object(H.jsxs)(s.a,{path:"/city/:name",children:[" ",Object(H.jsx)(Oe,{})," "]}),Object(H.jsxs)(s.a,{exact:!0,path:"/",children:[" ",Object(H.jsx)($,{cities:e})," "]})]})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,180)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},ge=n(34),ve=n(94),ye=(0,n(34).combineReducers)({cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:var n=e.cities.findIndex((function(e){return e.id===t.card.id}));return e.cities[n]=t.card,Object(b.a)(Object(b.a)({},e),{},{cities:Object(j.a)(e.cities)});case A:return Object(b.a)(Object(b.a)({},e),{},{cities:[t.card].concat(Object(j.a)(e.cities))});case N:return Object(b.a)(Object(b.a)({},e),{},{cities:e.cities.filter((function(e){return e.id!==t.citiesId}))});case D:return Object(b.a)(Object(b.a)({},e),{},{detailsPage:t.detailsPage});default:return e}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(b.a)(Object(b.a)({},e),{},{isLoading:t.isLoading});case y:return Object(b.a)(Object(b.a)({},e),{},{error:t.error});default:return e}}}),we=Object(ge.createStore)(ye,Object(ge.applyMiddleware)(ve.a));window.store=we;var Ce=we,ke=n(65);i.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(o.a,{store:Ce,children:Object(H.jsx)(ke.a,{children:Object(H.jsx)(xe,{})})})}),document.getElementById("root")),fe()}},[[136,1,2]]]);
//# sourceMappingURL=main.70e3ecb3.chunk.js.map