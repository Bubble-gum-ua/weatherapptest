(this.webpackJsonpweatherapptest=this.webpackJsonpweatherapptest||[]).push([[0],{110:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(25),i=n.n(a),s=(n(85),n(86),n(134)),o=n(137),u=n(132),d=n(4),l=n(14),j=n(26),p=n.n(j),b=n(41),h=n(50),m=n(10),x=n(65).create({baseURL:"https://api.openweathermap.org/data/2.5/"}),f="85132d4ddae160c1f8dcd7eea2cb7f41",O=function(e){return x.get("weather?appid=".concat(f,"&units=metric&q=").concat(e)).then((function(e){return e.data}))},g=function(e){return x.get("group?id=".concat(e,"&appid=").concat(f,"&units=metric")).then((function(e){return e.data}))},v=function(e,t){return x.get("onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=daily,alerts,minutely&appid=").concat(f,"&units=metric")).then((function(e){return e.data}))},y=function(e){return"https://openweathermap.org/img/wn/".concat(e,"@2x.png")},w=function(e){return"https://openweathermap.org/images/flags/".concat(e,".png")},C="TOGGLE_IS_LOADING",k="SET_ERROR",D={isLoading:!1,error:null},E=function(e){return{type:C,isLoading:e}},S=function(e){return{type:k,error:e}},T="ADD_CARD",A="DELETE_CARD",I="UPDATE_BODY",N="SET_DETAILS_PAGE",L={cities:[],detailsPage:{}},P=function(e){return{type:T,card:e}},_=function(e,t){return function(){var n=Object(b.a)(p.a.mark((function n(c,r){var a,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(E(!0)),n.next=4,O(e);case 4:a=n.sent,"ADD"===t?(i=r().cities.cities.find((function(e){return e.id===a.id})),c(i?S("City was picked"):P(a))):"UPDATE"===t&&c({type:I,card:a}),c(E(!1)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),c(S("Not found. Try again.")),c(E(!1));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},W=function(e){var t=new Date(1e3*e),n=t.getHours(),c=t.getMinutes();return n<10?c<10?"0".concat(n,":0").concat(c):"0".concat(n,":").concat(c):"".concat(n,":00")},M=n(66),R=n(2),U=r.a.memo((function(e){var t,n=e.detailCard,c=null===(t=n.hourly)||void 0===t?void 0:t.map((function(e){var t;return[W(e.dt),(t=e.temp,Math.round(t))]})),r=[["Hour","Temperature"]];if(c)for(var a=0;a<24;a++)r.push(c[a]);return Object(R.jsx)(u.a,{item:!0,style:{textAlign:"center"},children:Object(R.jsx)(M.a,{width:"600px",height:"400px",chartType:"ColumnChart",loader:Object(R.jsx)("div",{children:"Loading Chart"}),data:r,options:{hAxis:{title:"Hour"},vAxis:{title:"Temperature"},legend:"none",title:"Hourly temperature changing",backgroundColor:"transparent",colors:["white","white"],series:{0:{color:"#d7d120"}}}})})})),F=(n(110),Object(s.a)((function(e){return{root:{flexGrow:1,textAlign:"left",marginLeft:"15px"},content:{marginTop:"30px",background:"rgb(48,107,101,0.8)",color:"white",padding:"15px",boxShadow:"2px 2px 5px 2px rgb(169, 169, 101)",maxWidth:"200px"},button:{background:"rgb(48,107,101,0.8)",color:"white",fontSize:"18px"},graph:{background:"rgb(48,107,101,0.8)",marginTop:"40px",maxWidth:"600px"},flag:{width:"50px"}}}))),G=r.a.memo((function(e){var t=Object(d.f)(),n=Object(l.b)(),r=F(),a=Object(l.c)((function(e){return e.cities.cities})),i=Object(l.c)((function(e){return e.cities.detailsPage})),s=a.find((function(e){return e.name===a[0].name})),j=s.weather[0].icon,h=s.sys.country.split("").map((function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})).join(""),m=W(s.sys.sunrise),x=W(s.sys.sunset);Object(c.useEffect)((function(){var e,t;s&&n((e=s.coord.lat,t=s.coord.lon,function(){var n=Object(b.a)(p.a.mark((function n(c){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(E(!0)),n.next=4,v(e,t);case 4:r=n.sent,c({type:N,detailsPage:r}),c(E(!1)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),c(S("Error")),c(E(!1));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()))}),[s,n]);var f=function(e){return Math.round(e)};return Object(R.jsxs)("div",{className:"mainContentWrapp",children:[Object(R.jsx)("h1",{children:s.name}),Object(R.jsx)("img",{alt:"countryIco",src:w(h),className:r.flag}),Object(R.jsxs)("h2",{children:[" Temperature: ",f(s.main.temp)," \xb0C"]}),Object(R.jsx)(o.a,{onClick:function(){t.push("/")},className:r.button,children:"Back to all cards"}),Object(R.jsxs)(u.a,{container:!0,spacing:4,className:r.root,children:[Object(R.jsx)(u.a,{item:!0,xs:5,children:Object(R.jsxs)("div",{className:r.content,children:[Object(R.jsxs)("div",{children:["Feels like: ",f(s.main.feels_like)," C"]}),Object(R.jsxs)("div",{children:["Humidity: ",s.main.humidity," %"]}),Object(R.jsxs)("div",{children:["Pressure: ",s.main.pressure]}),Object(R.jsxs)("div",{children:["Max temperature: ",f(s.main.temp_max)," \xb0C"]}),Object(R.jsxs)("div",{children:["Min temperature: ",f(s.main.temp_min)," \xb0C"]}),Object(R.jsxs)("div",{children:["Wind: ",s.wind.speed," m/s ",s.wind.deg," degree"]}),Object(R.jsxs)("div",{children:["Sunrise: ",m]}),Object(R.jsxs)("div",{children:["Sunset: ",x]}),Object(R.jsx)("img",{alt:"weatherIco",src:y(j)})]})}),Object(R.jsx)(u.a,{item:!0,xs:3,className:r.graph,children:Object(R.jsx)(U,{detailCard:i})})]})]})})),H=n(135),B=n(136),J=n(72),q=n.n(J),z=n(73),V=n.n(z),Y=Object(s.a)((function(e){return{root:{flexGrow:1,cursor:"pointer"},paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary,cursor:"pointer",maxWidth:"300px",backgroundColor:"rgb(166, 217, 155)"},button:{backgroundColor:"blue",cursor:"pointer"}}})),K=r.a.memo((function(e){var t=e.name,n=e.main,c=e.wind,r=e.icon,a=e.cityId,i=e.weather,s=e.sys.country.split("").map((function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})).join(""),j=Y(),p=Object(d.f)(),b=Object(l.b)(),h=function(e){return Math.round(e)};return Object(R.jsx)("div",{className:j.root,children:Object(R.jsx)(H.a,{children:Object(R.jsxs)(B.a,{className:j.paper,children:[Object(R.jsxs)("h3",{children:[" ",t," ",Object(R.jsx)("img",{alt:"countryIco",src:w(s)})]}),Object(R.jsxs)(u.a,{container:!0,spacing:2,onClick:function(){p.push("/city/".concat(t))},children:[Object(R.jsxs)(u.a,{item:!0,xs:6,children:[Object(R.jsxs)("div",{children:["Temperature: ",h(n.temp)," \xb0C"]}),Object(R.jsxs)("div",{children:["Sky: ",i[0].main," "]}),Object(R.jsxs)("div",{children:["Wind: ",h(c.speed)," m/s"]})]}),Object(R.jsx)(u.a,{item:!0,xs:6,children:Object(R.jsx)("img",{alt:"weatherIco",src:y(r)})})]}),Object(R.jsx)(o.a,{variant:"contained",color:"primary",onClick:function(){b(_(t,"UPDATE"))},startIcon:Object(R.jsx)(q.a,{}),children:"Reload Data"}),Object(R.jsx)(o.a,{variant:"contained",color:"secondary",onClick:function(){b({type:A,citiesId:a})},className:j.button,startIcon:Object(R.jsx)(V.a,{}),children:"Delete"})]})})})})),Q=(n(113),n(77)),X=n(138),Z=Object(s.a)({button:{color:"white",background:"blue"},form:{background:"rgb(54,102,191,0.8)",margin:"15px",padding:"15px"}}),$=r.a.memo((function(){var e=Z(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.main.isLoading})),c=Object(Q.a)({initialValues:{name:""},onSubmit:function(e){t(_(e.name,"ADD")),c.resetForm()}});return Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:c.handleSubmit,className:e.form,children:[Object(R.jsx)(X.a,Object(m.a)(Object(m.a)({placeholder:"Type here the city name"},c.getFieldProps("name")),{},{onChange:c.handleChange,value:c.values.name})),Object(R.jsx)(o.a,{className:e.button,type:"submit",disabled:n||!c.values.name,variant:"contained",color:"primary",children:" Add City"})]})})})),ee=Object(s.a)({root:{minWidth:275}}),te=r.a.memo((function(e){var t=ee(),n=e.cities.map((function(e){return Object(R.jsx)(u.a,{item:!0,xs:4,children:Object(R.jsx)(u.a,{item:!0,children:Object(R.jsx)(K,{name:e.name,main:e.main,cityId:e.id,wind:e.wind,weather:e.weather,icon:e.weather[0].icon,sys:e.sys})})})}));return Object(R.jsxs)("div",{className:"mainWrap",children:[Object(R.jsx)("h1",{children:"Welcome to the weather widget!"}),Object(R.jsx)("h3",{children:"Click below to set your city"}),Object(R.jsx)($,{}),Object(R.jsx)(u.a,{container:!0,className:t.root,spacing:2,children:n})]})}));var ne=function(){var e=Object(l.c)((function(e){return e.cities.cities})),t=Object(l.b)();return Object(c.useEffect)((function(){var e=localStorage.getItem("cityCards");if(e&&"[]"!==e){var n=JSON.parse(e).reverse().join();t(function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(E(!0)),t.next=4,g(e);case 4:t.sent.list.forEach((function(e){return n(P(e))})),n(E(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(S("Error")),n(E(!1));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(n))}}),[t]),Object(c.useEffect)((function(){localStorage.setItem("cityCards",JSON.stringify(e.map((function(e){return e.id}))))}),[e]),Object(R.jsx)("div",{className:"App",children:Object(R.jsxs)(d.c,{children:[Object(R.jsxs)(d.a,{path:"/city/:name",children:[" ",Object(R.jsx)(G,{})," "]}),Object(R.jsxs)(d.a,{exact:!0,path:"/",children:[" ",Object(R.jsx)(te,{cities:e})," "]})]})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,140)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},re=n(27),ae=n(76),ie=(0,n(27).combineReducers)({cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:var n=e.cities.findIndex((function(e){return e.id===t.card.id}));return e.cities[n]=t.card,Object(m.a)(Object(m.a)({},e),{},{cities:Object(h.a)(e.cities)});case T:return Object(m.a)(Object(m.a)({},e),{},{cities:[t.card].concat(Object(h.a)(e.cities))});case A:return Object(m.a)(Object(m.a)({},e),{},{cities:e.cities.filter((function(e){return e.id!==t.citiesId}))});case N:return Object(m.a)(Object(m.a)({},e),{},{detailsPage:t.detailsPage});default:return e}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(m.a)(Object(m.a)({},e),{},{isLoading:t.isLoading});case k:return Object(m.a)(Object(m.a)({},e),{},{error:t.error});default:return e}}}),se=Object(re.createStore)(ie,Object(re.applyMiddleware)(ae.a));window.store=se;var oe=se,ue=n(46);i.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(l.a,{store:oe,children:Object(R.jsx)(ue.a,{children:Object(R.jsx)(ne,{})})})}),document.getElementById("root")),ce()},85:function(e,t,n){},86:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.7d895b32.chunk.js.map